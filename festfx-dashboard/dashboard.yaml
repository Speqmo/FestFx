views:
  - type: sections
    max_columns: 2
    icon: mdi:led-strip-variant
    path: ''
    sections:
      - type: grid
        cards:
          - type: custom:vertical-stack-in-card
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:bubble-card
                    card_type: button
                    entity: input_text.festfx_v_effect_playing
                    show_icon: true
                    icon: mdi:play
                    show_name: false
                    show_state: true
                    name: Live
                    button_type: state
                    show_attribute: false
                    attribute: pattern
                    sub_button:
                      - entity: input_boolean.festfx_s_auto
                        icon: mdi:animation-play
                        state_background: false
                        show_background: false
                        tap_action:
                          action: toggle
                      - icon: mdi:arrow-collapse-right
                        tap_action:
                          action: toggle
                        entity: input_boolean.festfx_v_settings
                        state_background: false
                        show_background: false
                        name: Force
                        show_name: true
                    styles: .bubble-button-card-container {background:transparent;}
                    card_mod:
                      entity: input_boolean.festfx_v_settings
                      style: >
                        .bubble-icon { color:#fff !important;}  .bubble-state
                        {    
                              color: #ffffff !important;
                              text-align: center !important;
                              font-weight: 600 !important;
                              text-transform: capitalize;}
                        .bubble-sub-button {border-radius:28px;color: #e6e6e6
                        !important;background: rgba(0,255,0,0.2)} 
                        .bubble-sub-button-1 {
                          {% if is_state('input_boolean.festfx_s_auto', 'on') %} background: #008800 !important;
                          {% else %} background: rgba(0,255,0,0.2) !important; {% endif %}
                        } .bubble-sub-button-2 {
                          {% if is_state('input_boolean.festfx_v_settings', 'on') %} background: #008800 !important;
                          {% else %} background: rgba(0,255,0,0.2) !important; {% endif %}
                        } 
              - type: custom:mod-card
                card:
                  type: horizontal-stack
                  cards:
                    - type: iframe
                      url: http://192.168.178.129:8123/local/FestFx.html
                      aspect_ratio: 2%
                      grid_options:
                        columns: full
                        rows: 1
                card_mod:
                  style: >
                    ha-card{border: 1px solid rgb(25,25,30) !important;
                    border-left:0px !important; border-right:0px !important;}
              - type: custom:mod-card
                card:
                  type: custom:mod-card
                  card:
                    square: false
                    type: grid
                    cards:
                      - type: custom:bubble-card
                        card_type: button
                        button_type: name
                        name: Effects
                        button_action:
                          tap_action:
                            action: call-service
                            service: input_select.select_option
                            target:
                              entity_id: input_select.festfx_tabs
                            data:
                              option: effects
                        card_mod:
                          class: festfx-tabs
                          style: |
                            ha-card {border-radius:0px !important;
                              {% if is_state('input_select.festfx_tabs', 'effects') %}
                              background: #000088 !important;
                              {% endif %}
                            }
                      - type: custom:bubble-card
                        card_type: button
                        button_type: name
                        name: Presets
                        button_action:
                          tap_action:
                            action: call-service
                            service: input_select.select_option
                            target:
                              entity_id: input_select.festfx_tabs
                            data:
                              option: presets
                        card_mod:
                          class: festfx-tabs
                          style: |
                            ha-card {border-radius:0px !important;
                              {% if is_state('input_select.festfx_tabs', 'presets') %}
                              background: #000088 !important;
                              {% endif %}
                            }
                      - type: custom:bubble-card
                        card_type: button
                        button_type: name
                        name: Auto
                        button_action:
                          tap_action:
                            action: call-service
                            service: input_select.select_option
                            target:
                              entity_id: input_select.festfx_tabs
                            data:
                              option: auto
                        card_mod:
                          class: festfx-tabs
                          style: |
                            ha-card {border-radius:0px !important;
                              {% if is_state('input_select.festfx_tabs', 'auto') %}
                              background: #000088 !important;
                              {% endif %}
                            }
                  card_mod:
                    style: >
                      ha-card {border-radius: 32px
                      !important;display:block;overflow:hidden;}
                card_mod:
                  style: >
                    ha-card {margin:10px 0px 0px 0px !important;padding:0px 0px
                    10px 0px !important;display:block;border-bottom: 1px solid
                    rgb(25,25,30) !important;}
              - type: custom:vertical-stack-in-card
                card_mod:
                  style: |
                    ha-card{border:none !important;padding:0px !important;}
                    :host {
                      display: {% if is_state('input_select.festfx_tabs', 'effects') 
                                  or is_state('input_text.festfx_v_effect', 'all') %}
                                block{% else %}none{% endif %}; }
                cards:
                  - type: custom:bubble-card
                    card_type: separator
                    name: Color / Gradient
                    grid_options:
                      columns: 12
                      rows: 0.5
                    icon: ''
                    card_mod:
                      class: festfx-seperator
                  - square: false
                    type: grid
                    columns: 4
                    cards:
                      - name: bar
                        icon: mdi:minus
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: bar
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: bar
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: bar
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: MC bar
                        icon: mdi:minus
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: multiBar
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: multiBar
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: multiBar
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: Blade
                        icon: mdi:sword
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: blade_power_plus
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: blade_power_plus
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: blade_power_plus
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: Strobe
                        icon: mdi:lightning-bolt-outline
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: strobe
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: strobe
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: strobe
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: Pitch
                        icon: mdi:pitchfork
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: pitchSpectrum
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: pitchSpectrum
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: pitchSpectrum
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: Magnitude
                        icon: mdi:magnet-on
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: magnitude
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: magnitude
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: magnitude
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: Power
                        icon: mdi:power-plug
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: power
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: power
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: power
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: Scan
                        icon: mdi:barcode-scan
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: scan
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: scan
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: scan
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: spectrum
                        icon: mdi:waveform
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: spectrum
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: spectrum
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: spectrum
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: wavelength
                        icon: mdi:sine-wave
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: wavelength
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: wavelength
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: wavelength
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                  - type: custom:bubble-card
                    card_type: separator
                    name: Gradient
                    grid_options:
                      columns: 12
                      rows: 0.5
                    icon: ''
                    card_mod:
                      class: festfx-seperator
                  - square: false
                    type: grid
                    columns: 4
                    cards:
                      - name: block reflections
                        icon: mdi:mirror-rectangle
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: block_reflections
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: block_reflections
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: block_reflections
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: crawler
                        icon: mdi:skip-backward
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: crawler
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: crawler
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: crawler
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: energy2
                        icon: mdi:distribute-vertical-center
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: energy2
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: energy2
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: energy2
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: fire
                        icon: mdi:fire
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: fire
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: fire
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: fire
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: glitch
                        icon: mdi:terraform
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: glitch
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: glitch
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: glitch
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: lava_lamp
                        icon: mdi:lava-lamp
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: lava_lamp
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: lava_lamp
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: lava_lamp
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: marching
                        icon: mdi:arrow-left-right
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: marching
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: marching
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: marching
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: melt
                        icon: mdi:ice-cream
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: melt
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: melt
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: melt
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: Melt Sparkle
                        icon: mdi:code-brackets
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: melt_and_sparkle
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: melt_and_sparkle
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: melt_and_sparkle
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: water
                        icon: mdi:water
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: water
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: water
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: water
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: bands
                        icon: mdi:equalizer
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: bands
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: bands
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: bands
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: bands matrix
                        icon: mdi:equalizer
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: bands_matrix
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: bands_matrix
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: bands_matrix
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: blocks
                        icon: mdi:equalizer
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: blocks
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: blocks
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: blocks
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: equalizer
                        icon: mdi:equalizer
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: equalizer
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: equalizer
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: equalizer
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                  - type: custom:bubble-card
                    card_type: separator
                    name: Lows / Mids / High
                    grid_options:
                      columns: 12
                      rows: 0.5
                    card_mod:
                      class: festfx-seperator
                    icon: ''
                  - square: false
                    type: grid
                    columns: 4
                    cards:
                      - name: Energy
                        icon: mdi:transmission-tower
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: energy
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: energy
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: energy
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: Rain
                        icon: mdi:grain
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: rain
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: rain
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: rain
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: scroll
                        icon: mdi:script-text
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: scroll
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: scroll
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: scroll
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                  - type: custom:bubble-card
                    card_type: separator
                    name: Other
                    grid_options:
                      columns: 12
                      rows: 0.7
                    card_mod:
                      class: festfx-seperator
                    icon: ''
                  - square: false
                    type: grid
                    columns: 4
                    cards:
                      - name: rainbow
                        icon: mdi:water
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: rainbow
                          tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: post
                              effect: rainbow
                          double_tap_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: last
                              effect: rainbow
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
                      - name: Debug
                        icon: mdi:cog
                        button_action:
                          hold_action:
                            action: call-service
                            perform_action: script.festfx_effect
                            data:
                              action: show
                              effect: all
                        grid_options:
                          columns: 3
                          rows: 0.7
                        type: custom:bubble-card
                        card_type: button
                        button_type: name
                        scrolling_effect: false
                        show_icon: true
                        tap_action:
                          action: none
                        card_mod:
                          class: festfx
              - type: custom:vertical-stack-in-card
                cards:
                  - type: horizontal-stack
                    cards:
                      - type: custom:bubble-card
                        card_type: button
                        entity: input_boolean.festfx_s_preset_save
                        show_icon: true
                        icon: mdi:content-save
                        show_name: false
                        show_state: false
                        button_type: switch
                        name: Save
                        scrolling_effect: false
                        tap_action:
                          action: toggle
                        styles: ''
                        card_mod:
                          entity: input_boolean.festfx_s_preset_save
                          class: festfx-preset-settings
                          style: |
                            .bubble-button-background {
                              {% if is_state('input_boolean.festfx_s_preset_save', 'on') %} background: #008800 !important;
                              {% else %} background: rgba(0,255,0,0.2) !important; {% endif %}
                            }
                            .bubble-button-card-container {
                              border-radius: var(--ha-card-border-radius) 0px 0px var(--ha-card-border-radius) !important;
                            }   
                      - type: custom:bubble-card
                        card_type: button
                        entity: input_boolean.festfx_s_name
                        show_icon: true
                        icon: mdi:rename
                        show_name: false
                        show_state: false
                        button_type: switch
                        name: Rename
                        scrolling_effect: false
                        tap_action:
                          action: toggle
                        styles: ''
                        card_mod:
                          entity: input_boolean.festfx_s_name
                          class: festfx-preset-settings
                          style: |
                            .bubble-button-background {
                              {% if is_state('input_boolean.festfx_s_name', 'on') %} background: #008800 !important;
                              {% else %} background: rgba(0,255,0,0.2) !important; {% endif %}
                            }
                            .bubble-button-card-container {
                              border-radius:0px !important;
                            }   
                      - type: custom:bubble-card
                        card_type: button
                        entity: input_boolean.festfx_s_playlist
                        show_icon: true
                        icon: mdi:playlist-edit
                        show_name: false
                        show_state: false
                        button_type: switch
                        name: Playlist
                        scrolling_effect: false
                        tap_action:
                          action: toggle
                        styles: ''
                        card_mod:
                          class: festfx-preset-settings
                          entity: input_boolean.festfx_s_playlist
                          style: |
                            .bubble-button-background {
                              {% if is_state('input_boolean.festfx_s_playlist', 'on') %} background: #008800 !important;
                              {% else %} background: rgba(0,255,0,0.2) !important; {% endif %}
                            }
                            .bubble-button-card-container {
                             border-radius: 0px var(--ha-card-border-radius) var(--ha-card-border-radius) 0px !important;
                            }   
                      - type: custom:bubble-card
                        card_type: button
                        entity: input_boolean.festfx_s_playlist_show
                        show_icon: true
                        icon: mdi:waveform
                        show_name: false
                        show_state: false
                        button_type: switch
                        name: Playlist Show
                        scrolling_effect: false
                        tap_action:
                          action: toggle
                        styles: ''
                        card_mod:
                          class: festfx-preset-settings
                          entity: input_boolean.festfx_s_playlist_show
                          style: |
                            .bubble-button-background {
                              {% if is_state('input_boolean.festfx_s_playlist_show', 'on') %} background: #008800 !important;
                              {% else %} background: rgba(0,255,0,0.2) !important; {% endif %}
                            }
                            .bubble-button-card-container {
                              border-radius: var(--ha-card-border-radius) var(--ha-card-border-radius)  !important;
                            }   
                      - type: custom:bubble-card
                        card_type: button
                        entity: input_boolean.festfx_s_current_colors
                        show_icon: true
                        icon: mdi:palette
                        show_name: false
                        show_state: false
                        button_type: switch
                        name: Current colors
                        scrolling_effect: false
                        tap_action:
                          action: toggle
                        styles: ''
                        card_mod:
                          class: festfx-preset-settings
                          entity: input_boolean.festfx_s_current_colors
                          style: |
                            .bubble-button-background {
                              {% if is_state('input_boolean.festfx_s_current_colors', 'on') %} background: #008800 !important;
                              {% else %} background: rgba(0,255,0,0.2) !important; {% endif %}
                            }
                            .bubble-button-card-container {
                              border-radius: var(--ha-card-border-radius) 0px 0px var(--ha-card-border-radius) !important;
                            }   
                      - type: custom:bubble-card
                        card_type: button
                        entity: input_boolean.festfx_s_current_brightness
                        show_icon: true
                        icon: mdi:brightness-6
                        show_name: false
                        show_state: false
                        button_type: switch
                        name: Current brightness
                        scrolling_effect: false
                        tap_action:
                          action: toggle
                        styles: ''
                        card_mod:
                          class: festfx-preset-settings
                          entity: input_boolean.festfx_s_current_brightness
                          style: |
                            .bubble-button-background {
                              {% if is_state('input_boolean.festfx_s_current_brightness', 'on') %} background: #008800 !important;
                              {% else %} background: rgba(0,255,0,0.2) !important; {% endif %}
                            }
                               .bubble-button-card-container {
                              border-radius: 0px var(--ha-card-border-radius) var(--ha-card-border-radius) 0px !important;
                            }   
                  - type: custom:bubble-card
                    card_type: separator
                    name: All presets
                    grid_options:
                      columns: 12
                      rows: 0.5
                    icon: ''
                    card_mod:
                      class: festfx-seperator
                      style: >
                        ha-card {border-top: 1px solid rgb(25,25,30)
                        !important;}
                  - square: false
                    type: grid
                    columns: 4
                    cards:
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_1_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_1
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_1', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_1', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_1', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 1
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 1
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 1
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_2_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_2
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_2', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_2', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_2', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 2
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 2
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 2
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_3_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_3
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_3', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_3', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_3', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 3
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 3
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 3
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_4_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_4
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_4', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_4', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_4', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 4
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 4
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 4
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_5_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_5
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_5', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_5', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_5', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 5
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 5
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 5
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_6_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_6
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_6', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_6', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_6', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 6
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 6
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 6
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_7_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_7
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_7', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_7', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_7', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 7
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 7
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 7
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_8_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_8
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_8', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_8', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_8', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 8
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 8
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 8
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_9_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_9
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_9', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_9', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_9', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 9
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 9
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 9
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_10_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_10
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_10', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_10', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_10', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 10
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 10
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 10
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_11_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_11
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_11', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_11', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_11', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 11
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 11
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 11
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_12_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_12
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_12', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_12', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_12', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 12
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 12
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 12
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_13_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_13
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_13', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_13', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_13', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 13
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 13
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 13
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_14_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_14
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_14', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_14', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_14', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 14
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 14
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 14
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_15_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_15
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_15', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_15', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_15', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 15
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 15
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 15
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_16_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_16
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_16', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_16', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_16', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 16
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 16
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 16
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_17_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_17
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_17', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_17', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_17', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 17
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 17
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 17
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_18_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_18
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_18', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_18', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_18', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 18
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 18
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 18
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_19_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_19
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_19', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_19', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_19', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 19
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 19
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 19
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_20_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_20
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_20', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_20', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_20', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 20
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 20
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 20
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_21_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_21
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_21', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_21', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_21', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 21
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 21
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 21
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_22_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_22
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_22', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_22', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_22', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 22
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 22
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 22
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_23_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_23
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_23', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_23', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_23', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 23
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 23
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 23
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_24_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_24
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_24', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_24', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_24', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 24
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 24
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 24
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_25_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_25
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_25', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_25', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_25', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 25
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 25
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 25
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_26_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_26
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_26', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_26', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_26', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 26
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 26
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 26
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_27_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_27
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_27', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_27', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_27', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 27
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 27
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 27
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_28_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_28
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_28', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_28', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_28', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 28
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 28
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 28
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_29_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_29
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_29', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_29', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_29', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 29
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 29
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 29
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_30_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_30
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_30', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_30', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_30', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 30
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 30
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 30
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_31_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_31
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_31', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_31', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_31', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 31
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 31
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 31
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_32_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_32
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_32', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_32', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_32', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 32
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 32
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 32
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_33_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_33
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_33', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_33', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_33', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 33
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 33
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 33
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_34_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_34
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_34', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_34', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_34', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 34
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 34
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 34
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_35_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_35
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_35', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_35', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_35', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 35
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 35
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 35
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_36_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_36
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_36', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_36', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_36', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 36
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 36
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 36
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_37_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_37
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_37', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_37', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_37', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 37
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 37
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 37
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_38_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_38
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_38', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_38', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_38', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 38
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 38
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 38
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_39_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_39
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_39', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_39', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_39', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 39
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 39
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 39
                      - type: custom:bubble-card
                        entity: input_text.festfx_p_40_name
                        show_icon: false
                        show_name: false
                        show_state: true
                        scrolling_effect: false
                        card_type: button
                        button_type: state
                        card_mod:
                          class: festfx
                          entity: input_boolean.festfx_s_playlist
                          dependencies:
                            - input_boolean.festfx_s_playlist_show
                            - input_boolean.festfx_p_40
                          style: >
                            {% if (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                    is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                    is_state('input_select.festfx_p_40', 'low') %}
                              .bubble-button-card-container {border:1px solid #008800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_40', 'build up') %}
                              .bubble-button-card-container {border:1px solid #888800;}
                            {% elif (is_state('input_boolean.festfx_s_playlist',
                            'on') or
                                      is_state('input_boolean.festfx_s_playlist_show', 'on')) and
                                      is_state('input_select.festfx_p_40', 'high') %}
                              .bubble-button-card-container {border:1px solid #880000;}
                            {% endif %}
                        button_action:
                          tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: click
                              preset: 40
                          hold_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: hold
                              preset: 40
                          double_tap_action:
                            action: call-service
                            service: script.festfx_preset
                            data:
                              action: double
                              preset: 40
                card_mod:
                  style: |
                    ha-card{border:none !important;padding:0px !important;}
                    :host {
                      display: {% if is_state('input_select.festfx_tabs', 'presets') 
                                  or is_state('input_text.festfx_v_effect', 'all') %}
                                block{% else %}none{% endif %}; }
          - type: horizontal-stack
            cards: []
            grid_options:
              columns: 12
              rows: 0.1
      - type: grid
        cards:
          - type: custom:vertical-stack-in-card
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:bubble-card
                    card_type: button
                    entity: input_text.festfx_v_effect
                    show_icon: true
                    icon: mdi:cog
                    show_name: false
                    show_state: true
                    name: Gradient
                    button_type: state
                    show_attribute: false
                    attribute: pattern
                    sub_button:
                      - entity: input_boolean.festfx_v_sync
                        name: Sync
                        show_name: true
                        show_state: false
                        show_icon: false
                        show_background: false
                        tap_action:
                          action: none
                      - entity: input_boolean.festfx_v_direct
                        name: Direct
                        show_state: false
                        show_name: true
                        icon: mdi:upload
                        tap_action:
                          action: toggle
                        state_background: true
                      - entity: input_text.festfx_effect
                        icon: mdi:rocket-launch
                        show_background: false
                        tap_action:
                          action: perform-action
                          perform_action: script.festfx_effect_launch
                        name: Launch
                        show_name: true
                        show_state: false
                    styles: .bubble-button-card-container {background:transparent;}
                    card_mod:
                      entity: input_boolean.festfx_v_direct
                      extra_entities:
                        - input_boolean.festfx_v_sync
                      style: >
                        .bubble-icon { color:#fff !important;}  .bubble-state
                        {    
                              color: #ffffff !important;
                              text-align: center !important;
                              font-weight: 600 !important;
                              text-transform: capitalize;}
                        .bubble-sub-button {border-radius:28px;color: #e6e6e6
                        !important;background: rgba(0,255,0,0.2)}  
                        .bubble-sub-button-1 {background:transparent !important;
                        color:#555 !important;border:1px solid;
                          {% if is_state('input_boolean.festfx_v_sync', 'on') %} color: #008800 !important;{% endif %}}
                        .bubble-sub-button-2 {
                          {% if is_state('input_boolean.festfx_v_direct', 'on') %} background: #008800 !important;
                          {% else %} background: rgba(0,255,0,0.2) !important; {% endif %}
                        }   .bubble-sub-button-3 {transition: transform 1s
                        linear;} .bubble-sub-button-3:active {background-color:
                        #008800 !important}
              - type: custom:mod-card
                card:
                  type: horizontal-stack
                  cards:
                    - type: iframe
                      url: http://192.168.178.129:8123/local/FestFx_preview.html
                      aspect_ratio: 2%
                      grid_options:
                        columns: full
                        rows: 1
                card_mod:
                  style: >
                    ha-card{border: 1px solid rgb(25,25,30) !important;
                    border-left:0px !important; border-right:0px !important;}
              - type: custom:mod-card
                card:
                  type: horizontal-stack
                  cards:
                    - type: custom:bubble-card
                      card_type: button
                      button_type: state
                      entity: input_text.festfx_c_1
                      show_icon: false
                      scrolling_effect: false
                      show_name: false
                      show_state: false
                      button_action:
                        tap_action:
                          action: call-service
                          service: script.festfx_preset_colors
                          data:
                            action: load
                            preset: 1
                        hold_action:
                          action: perform-action
                          data:
                            action: save
                            preset: 1
                          perform_action: script.festfx_preset_colors
                          target: {}
                      card_mod:
                        entity: input_text.festfx_c_1_background
                        class: festfx-c
                        style: >
                          .bubble-button-card-container {background: {{
                          states('input_text.festfx_c_1_background') }}
                          !important;}
                    - type: custom:bubble-card
                      card_type: button
                      button_type: state
                      entity: input_text.festfx_c_2
                      show_icon: false
                      scrolling_effect: false
                      show_name: false
                      show_state: false
                      button_action:
                        tap_action:
                          action: call-service
                          service: script.festfx_preset_colors
                          data:
                            action: load
                            preset: 2
                        hold_action:
                          action: perform-action
                          data:
                            action: save
                            preset: 2
                          perform_action: script.festfx_preset_colors
                          target: {}
                      card_mod:
                        entity: input_text.festfx_c_2_background
                        class: festfx-c
                        style: >
                          .bubble-button-card-container {background: {{
                          states('input_text.festfx_c_2_background') }}
                          !important;}
                    - type: custom:bubble-card
                      card_type: button
                      button_type: state
                      entity: input_text.festfx_c_3
                      show_icon: false
                      scrolling_effect: false
                      show_name: false
                      show_state: false
                      button_action:
                        tap_action:
                          action: call-service
                          service: script.festfx_preset_colors
                          data:
                            action: load
                            preset: 3
                        hold_action:
                          action: perform-action
                          data:
                            action: save
                            preset: 3
                          perform_action: script.festfx_preset_colors
                          target: {}
                      card_mod:
                        entity: input_text.festfx_c_3_background
                        class: festfx-c
                        style: >
                          .bubble-button-card-container {background: {{
                          states('input_text.festfx_c_3_background') }}
                          !important;}
                    - type: custom:bubble-card
                      card_type: button
                      button_type: state
                      entity: input_text.festfx_c_4
                      show_icon: false
                      scrolling_effect: false
                      show_name: false
                      show_state: false
                      button_action:
                        tap_action:
                          action: call-service
                          service: script.festfx_preset_colors
                          data:
                            action: load
                            preset: 4
                        hold_action:
                          action: perform-action
                          data:
                            action: save
                            preset: 4
                          perform_action: script.festfx_preset_colors
                          target: {}
                      card_mod:
                        entity: input_text.festfx_c_4_background
                        class: festfx-c
                        style: >
                          .bubble-button-card-container {background: {{
                          states('input_text.festfx_c_4_background') }}
                          !important;}
                    - type: custom:bubble-card
                      card_type: button
                      button_type: state
                      entity: input_text.festfx_c_5
                      show_icon: false
                      scrolling_effect: false
                      show_name: false
                      show_state: false
                      button_action:
                        tap_action:
                          action: call-service
                          service: script.festfx_preset_colors
                          data:
                            action: load
                            preset: 5
                        hold_action:
                          action: perform-action
                          data:
                            action: save
                            preset: 5
                          perform_action: script.festfx_preset_colors
                          target: {}
                      card_mod:
                        entity: input_text.festfx_c_5_background
                        class: festfx-c
                        style: >
                          .bubble-button-card-container {background: {{
                          states('input_text.festfx_c_5_background') }}
                          !important;}
                    - type: custom:bubble-card
                      card_type: button
                      button_type: state
                      entity: input_text.festfx_c_6
                      show_icon: false
                      scrolling_effect: false
                      show_name: false
                      show_state: false
                      button_action:
                        tap_action:
                          action: call-service
                          service: script.festfx_preset_colors
                          data:
                            action: load
                            preset: 6
                        hold_action:
                          action: perform-action
                          data:
                            action: save
                            preset: 6
                          perform_action: script.festfx_preset_colors
                          target: {}
                      card_mod:
                        entity: input_text.festfx_c_6_background
                        class: festfx-c
                        style: >
                          .bubble-button-card-container {background: {{
                          states('input_text.festfx_c_6_background') }}
                          !important;}
                card_mod:
                  style: >
                    ha-card{border-bottom: 1px solid rgb(25,25,30) !important;
                    border-left:0px !important; border-right:0px !important;}
              - type: horizontal-stack
                cards:
                  - type: custom:bubble-card
                    card_type: button
                    entity: input_text.festfx_v_lows
                    show_icon: true
                    icon: mdi:chevron-up
                    show_name: true
                    show_state: false
                    name: Lows
                    scrolling_effect: false
                    button_action:
                      tap_action:
                        action: call-service
                        service: script.festfx_effect_popup
                        data:
                          input: lows
                    card_mod:
                      class: color-picker
                      entity: input_boolean.festfx_b_color_lows
                      extra_entities:
                        - input_text.festfx_v_lows
                      style: |
                        ha-card {
                              {% if is_state('input_boolean.festfx_b_color_lows', 'on') %}
                                opacity: 1 !important;
                              {% else %}
                                opacity: 0.1 !important;z-index:1;
                              {% endif %}
                            }
                         .bubble-button-card-container {
                          background: {{ states('input_text.festfx_v_lows') }};
                          border-radius: var(--ha-card-border-radius) 0px 0px var(--ha-card-border-radius) !important;
                        }   
                  - type: custom:bubble-card
                    card_type: button
                    entity: input_text.festfx_v_mids
                    show_icon: true
                    button_action:
                      tap_action:
                        action: call-service
                        service: script.festfx_effect_popup
                        data:
                          input: mids
                    card_mod:
                      class: color-picker
                      entity: input_boolean.festfx_b_color_mids
                      extra_entities:
                        - input_text.festfx_v_mids
                      style: |
                        ha-card {
                              {% if is_state('input_boolean.festfx_b_color_mids', 'on') %}
                                opacity: 1 !important;
                              {% else %}
                                opacity: 0.1 !important;z-index:1;
                              {% endif %}
                            }
                          .bubble-button-card-container {
                          background: {{ states('input_text.festfx_v_mids') }};
                          border-radius: 0px  !important;
                        }    
                    icon: mdi:chevron-double-up
                    show_name: true
                    show_state: false
                    name: Mids
                    scrolling_effect: false
                  - type: custom:bubble-card
                    card_type: button
                    entity: input_text.festfx_v_high
                    show_icon: true
                    icon: mdi:chevron-triple-up
                    button_action:
                      tap_action:
                        action: call-service
                        service: script.festfx_effect_popup
                        data:
                          input: high
                    show_name: true
                    show_state: false
                    name: High
                    card_mod:
                      class: color-picker
                      entity: input_boolean.festfx_b_color_high
                      extra_entities:
                        - input_text.festfx_v_high
                      style: |
                        ha-card {
                              {% if is_state('input_boolean.festfx_b_color_high', 'on') %}
                                opacity: 1 !important;
                              {% else %}
                                opacity: 0.1 !important;z-index:1;
                              {% endif %}
                            }
                          .bubble-button-card-container {
                          background: {{ states('input_text.festfx_v_high') }};
                          border-radius: 0px var(--ha-card-border-radius) var(--ha-card-border-radius) 0px !important;
                        }    
                    scrolling_effect: false
              - type: horizontal-stack
                cards:
                  - type: custom:bubble-card
                    card_type: button
                    entity: input_text.festfx_v_gradient
                    show_icon: true
                    icon: mdi:palette
                    show_name: true
                    show_state: false
                    name: Color
                    button_type: state
                    button_action:
                      tap_action:
                        action: call-service
                        service: script.festfx_effect_popup
                        data:
                          input: gradient
                    card_mod:
                      class: color-picker
                      entity: input_boolean.festfx_b_gradient
                      extra_entities:
                        - input_select.festfx_v_gradient
                      style: |
                        ha-card {
                          {% if is_state('input_boolean.festfx_b_gradient', 'on') %}
                            opacity: 1 !important;
                          {% else %}
                            opacity: 0.1 !important;  z-index: 1;
                          {% endif %}
                        } .bubble-button-card-container {
                          background: {{ states('input_text.festfx_v_gradient') }};
                          border-radius: var(--ha-card-border-radius) 0px 0px var(--ha-card-border-radius) !important;
                        }
                  - type: custom:bubble-card
                    card_type: button
                    entity: input_number.festfx_v_brightness
                    show_icon: true
                    styles: >
                      .bubble-button-card-container {border-radius: 0px
                      var(--ha-card-border-radius) var(--ha-card-border-radius)
                      0px !important;}
                    icon: mdi:brightness-6
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    show_attribute: false
                    slider_live_update: false
                    name: Brightness
                    tap_action:
                      action: none
              - type: horizontal-stack
                cards:
                  - type: custom:bubble-card
                    card_type: button
                    entity: input_text.festfx_v_background_color
                    show_icon: true
                    icon: mdi:view-grid-compact
                    show_name: true
                    show_state: false
                    name: Background
                    button_action:
                      tap_action:
                        action: call-service
                        service: script.festfx_effect_popup
                        data:
                          input: background_color
                    card_mod:
                      class: color-picker
                      entity: input_boolean.festfx_b_background_color
                      extra_entities:
                        - input_text.festfx_v_background_color
                      style: |
                        .bubble-button-card-container {
                          background: {{ states('input_text.festfx_v_background_color') }};
                          border-radius: var(--ha-card-border-radius) 0px 0px var(--ha-card-border-radius) !important;
                        }    
                  - type: custom:bubble-card
                    card_type: button
                    entity: input_number.festfx_v_background_brightness
                    show_icon: true
                    styles: >
                      .bubble-button-card-container {border-radius: 0px
                      var(--ha-card-border-radius) var(--ha-card-border-radius)
                      0px !important;}
                    icon: mdi:brightness-6
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    show_attribute: false
                    slider_live_update: false
                    name: Brightness
                    tap_action:
                      action: none
              - type: horizontal-stack
                cards:
                  - type: custom:bubble-card
                    card_type: button
                    button_type: slider
                    entity: input_number.festfx_v_blur
                    styles: ''
                    icon: mdi:blur-linear
                    show_name: true
                    name: Blur
                    show_icon: true
                    show_state: false
                    show_attribute: false
                  - type: custom:bubble-card
                    card_type: button
                    entity: input_boolean.festfx_v_mirror
                    show_icon: true
                    card_mod:
                      entity: input_boolean.festfx_v_mirror
                      style: |
                        .bubble-button-background {
                          {% if is_state('input_boolean.festfx_v_mirror', 'on') %} background: #008800 !important;
                          {% else %} background: rgba(0,255,0,0.2) !important; {% endif %}
                        }
                    icon: mdi:align-horizontal-center
                    show_name: true
                    show_state: false
                    button_type: switch
                    name: Mirror
                    scrolling_effect: false
                    tap_action:
                      action: toggle
                  - type: custom:bubble-card
                    card_type: button
                    entity: input_boolean.festfx_v_flip
                    show_icon: true
                    icon: mdi:flip-horizontal
                    show_name: true
                    show_state: false
                    button_type: switch
                    name: Flip
                    scrolling_effect: false
                    tap_action:
                      action: toggle
                    card_mod:
                      entity: input_boolean.festfx_v_flip
                      style: |
                        .bubble-button-background {
                          {% if is_state('input_boolean.festfx_v_flip', 'on') %} background: #008800 !important;
                          {% else %} background: rgba(0,255,0,0.2) !important; {% endif %}
                        }
          - type: horizontal-stack
            cards: []
            grid_options:
              columns: 12
              rows: 0.2
          - type: custom:vertical-stack-in-card
            cards:
              - type: horizontal-stack
                cards:
                  - type: custom:bubble-card
                    card_type: button
                    entity: input_text.festfx_v_effect
                    show_icon: true
                    icon: mdi:tune-vertical
                    show_name: true
                    show_state: false
                    name: Configuration
                    button_type: state
                    show_attribute: false
                    attribute: pattern
                    sub_button: []
                    styles: >-
                      .bubble-button-card-container
                      {background:transparent;margin-bottom:10px;}
                    button_action:
                      tap_action:
                        action: none
                    card_mod:
                      entity: input_boolean.festfx_v_direct
                      style: >
                        .bubble-icon { color:#fff !important;}  .bubble-state
                        {    
                              color: #ffffff !important;
                              text-align: center !important;
                              font-weight: 600 !important;
                              text-transform: capitalize;}
                        .bubble-sub-button {border-radius:28px;color: #e6e6e6
                        !important;background: rgba(0,255,0,0.2)} 
                        .bubble-sub-button-1 {
                          {% if is_state('input_boolean.festfx_v_direct', 'on') %} background: #008800 !important;
                          {% else %} background: rgba(0,255,0,0.2) !important; {% endif %}
                        } .bubble-sub-button-2 {transition: transform 1s
                        linear;} .bubble-sub-button-2:active {background-color:
                        #008800 !important} ha-card{border-bottom: 1px solid
                        rgb(25,25,30) !important; border-left:0px !important;
                        border-right:0px !important;}
              - square: false
                type: grid
                cards:
                  - entity: input_select.festfx_v_mode
                    icon: mdi:creation-outline
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_mode
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    show_name: false
                    show_state: true
                    show_icon: true
                    type: custom:bubble-card
                    card_type: select
                    grid_options:
                      columns: 6
                      rows: 0.8
                    scrolling_effect: false
                  - entity: input_select.festfx_v_mixing_mode
                    icon: mdi:creation-outline
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_mixing_mode
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    show_name: false
                    show_state: true
                    show_icon: true
                    type: custom:bubble-card
                    card_type: select
                    grid_options:
                      columns: 6
                      rows: 1
                    scrolling_effect: false
                  - name: Color Cycle
                    icon: mdi:palette-swatch-variant
                    entity: input_boolean.festfx_v_color_cycler
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_color_cycler
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: switch
                    scrolling_effect: false
                    type: custom:bubble-card
                    card_type: button
                    tap_action:
                      action: toggle
                    grid_options:
                      columns: 6
                      rows: 0.8
                    card_mod:
                      entity: input_boolean.festfx_v_color_cycler
                      style: |
                        .bubble-button-background {
                          {% if is_state('input_boolean.festfx_v_color_cycler', 'on') %} background: #008800 !important;
                          {% else %} background: rgba(0,255,0,0.2) !important; {% endif %}
                        }
                  - entity: input_select.festfx_v_mode2
                    icon: mdi:creation-outline
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_mode2
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    show_name: false
                    show_state: true
                    show_icon: true
                    type: custom:bubble-card
                    card_type: select
                    grid_options:
                      columns: 6
                      rows: 1
                    scrolling_effect: false
                  - entity: input_select.festfx_v_ease_method
                    icon: mdi:transition
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_ease_method
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    show_name: false
                    show_state: true
                    show_icon: true
                    type: custom:bubble-card
                    card_type: select
                    grid_options:
                      columns: 6
                      rows: 1
                    scrolling_effect: false
                  - entity: input_select.festfx_v_strobe_pattern
                    name: Pattern
                    icon: mdi:flash
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_strobe_pattern
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    show_name: true
                    show_state: true
                    show_icon: true
                    type: custom:bubble-card
                    card_type: select
                    grid_options:
                      columns: 6
                      rows: 1
                    scrolling_effect: false
                    styles: >-
                      .bubble-select-card-container {border-radius:
                      var(--ha-card-border-radius) 0px 0px
                      var(--ha-card-border-radius) !important;}
                  - entity: input_select.festfx_v_strobe_frequency
                    name: Freq
                    icon: mdi:sine-wave
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_strobe_frequency
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    show_name: true
                    show_state: true
                    show_icon: true
                    type: custom:bubble-card
                    card_type: select
                    grid_options:
                      columns: 6
                      rows: 1
                    scrolling_effect: false
                    styles: >-
                      .bubble-select-card-container {border-radius: 0px
                      var(--ha-card-border-radius) var(--ha-card-border-radius)
                      0px !important;}
                  - entity: input_select.festfx_v_beat_skip
                    icon: mdi:debug-step-over
                    show_name: true
                    show_state: true
                    show_icon: true
                    type: custom:bubble-card
                    card_type: select
                    grid_options:
                      columns: 6
                      rows: 1
                    scrolling_effect: false
                    name: skip
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_skip_every
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    styles: >-
                      .bubble-select-card-container {border-radius:
                      var(--ha-card-border-radius) 0px 0px
                      var(--ha-card-border-radius) !important;}
                    card_layout: normal
                  - entity: input_select.festfx_v_skip_every
                    icon: mdi:metronome
                    show_name: true
                    show_state: true
                    show_icon: true
                    type: custom:bubble-card
                    card_type: select
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_beat_skip
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    grid_options:
                      columns: 6
                      rows: 1
                    scrolling_effect: false
                    name: beats
                    styles: |
                      .bubble-select-card-container {border-radius:
                                  0px var(--ha-card-border-radius) var(--ha-card-border-radius) 0px
                                  !important;}
                  - entity: input_number.festfx_v_multiplier
                    name: Multiplier
                    icon: mdi:weight-lifter
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_multiplier
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_sensitivity
                    name: Sensitivity
                    icon: mdi:weight-lifter
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_sensitivity
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_sensitivity
                    name: Sensitivity
                    icon: mdi:weight-lifter
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_sensitivity
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_gradient_roll
                    name: Color Roll
                    icon: mdi:speedometer
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_gradient_roll
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_color_step
                    name: Color step
                    icon: mdi:palette-swatch-variant
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_color_step
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_beat_decay
                    name: Beat decay
                    icon: mdi:blur-linear
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_beat_decay
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_strobe_decay
                    name: Strobe decay
                    icon: mdi:blur-linear
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_strobe_decay
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_decay
                    name: Decay
                    icon: mdi:blur-linear
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_decay
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_responsiveness
                    name: Responsiveness
                    icon: mdi:speedometer
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_responsiveness
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_reactivity
                    name: reactivity
                    icon: mdi:speedometer
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_reactivity
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_sway
                    name: sway
                    icon: mdi:skip-backward
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_sway
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_chop
                    name: chop
                    icon: mdi:scissors-cutting
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_chop
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_stretch
                    name: stretch
                    icon: mdi:stretch-to-page-outline
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_stretch
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_intensity
                    name: intensity
                    icon: mdi:weight-lifter
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_intensity
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_color_shift
                    name: color shift
                    icon: mdi:palette-swatch-variant
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_color_shift
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_saturation_threshold
                    name: saturation_threshold
                    icon: mdi:invert-colors
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_saturation_threshold
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_contrast
                    name: contrast
                    icon: mdi:contrast
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_contrast
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_band_count
                    name: band_count
                    icon: mdi:counter
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_band_count
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_gradient_repeat
                    name: gradient repeat
                    icon: mdi:counter
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_gradient_repeat
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_block_count
                    name: block count
                    icon: mdi:counter
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_block_count
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_fade_rate
                    name: Fade Rate
                    icon: mdi:blur-linear
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_fade_rate
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_select.festfx_v_frequency_range
                    icon: mdi:microphone-outline
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_frequency_range
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    show_name: false
                    show_state: true
                    show_icon: true
                    type: custom:bubble-card
                    card_type: select
                    grid_options:
                      columns: 6
                      rows: 1
                    scrolling_effect: false
                  - entity: input_select.festfx_v_align
                    icon: mdi:align-vertical-distribute
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_align
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    show_name: false
                    name: align
                    show_state: true
                    show_icon: true
                    type: custom:bubble-card
                    card_type: select
                    grid_options:
                      columns: 6
                      rows: 1
                    scrolling_effect: false
                  - name: Fix Hues
                    icon: mdi:tools
                    entity: input_boolean.festfx_v_fix_hues
                    card_mod:
                      entity: input_boolean.festfx_v_fix_hues
                      style: |
                        .bubble-button-background {
                          {% if is_state('input_boolean.festfx_v_fix_hues', 'on') %} background: #008800 !important;
                          {% else %} background: rgba(0,255,0,0.2) !important; {% endif %}
                        }
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_fix_hues
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: switch
                    scrolling_effect: false
                    type: custom:bubble-card
                    card_type: button
                    tap_action:
                      action: toggle
                    grid_options:
                      columns: 6
                      rows: 1
                  - name: Use Gradient
                    icon: mdi:gradient-horizontal
                    entity: input_boolean.festfx_v_use_grad
                    card_mod:
                      entity: input_boolean.festfx_v_use_grad
                      style: |
                        .bubble-button-background {
                          {% if is_state('input_boolean.festfx_v_use_grad', 'on') %} background: #008800 !important;
                          {% else %} background: rgba(0,255,0,0.2) !important; {% endif %}
                        }
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_use_grad
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: switch
                    scrolling_effect: false
                    type: custom:bubble-card
                    card_type: button
                    tap_action:
                      action: toggle
                    grid_options:
                      columns: 6
                      rows: 1
                  - name: Color Intensity
                    icon: mdi:invert-colors
                    entity: input_boolean.festfx_v_color_intensity
                    card_mod:
                      entity: input_boolean.festfx_v_color_intensity
                      style: |
                        .bubble-button-background {
                          {% if is_state('input_boolean.festfx_v_color_intensity', 'on') %} background: #008800 !important;
                          {% else %} background: rgba(0,255,0,0.2) !important; {% endif %}
                        }
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_color_intensity
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: switch
                    scrolling_effect: false
                    type: custom:bubble-card
                    card_type: button
                    tap_action:
                      action: toggle
                    grid_options:
                      columns: 6
                      rows: 1
                  - name: Bounce
                    icon: mdi:pan-horizontal
                    entity: input_boolean.festfx_v_bounce
                    card_mod:
                      entity: input_boolean.festfx_v_bounce
                      style: |
                        .bubble-button-background {
                          {% if is_state('input_boolean.festfx_v_bounce', 'on') %} background: #008800 !important;
                          {% else %} background: rgba(0,255,0,0.2) !important; {% endif %}
                        }
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_bounce
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: switch
                    scrolling_effect: false
                    type: custom:bubble-card
                    card_type: button
                    tap_action:
                      action: toggle
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_select.festfx_v_pulse_strip
                    icon: mdi:microphone
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_pulse_strip
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    show_name: true
                    name: Pulse
                    show_state: true
                    show_icon: true
                    type: custom:bubble-card
                    card_type: select
                    grid_options:
                      columns: 6
                      rows: 0.8
                    scrolling_effect: false
                  - entity: input_select.festfx_v_raindrop_animation
                    icon: mdi:creation
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_raindrop_animation
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    show_name: false
                    show_state: true
                    show_icon: true
                    type: custom:bubble-card
                    card_type: select
                    grid_options:
                      columns: 6
                      rows: 0.8
                    scrolling_effect: false
                  - entity: input_number.festfx_v_bass_decay_rate
                    name: Bass Fade Rate
                    icon: mdi:blur-linear
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_bass_decay_rate
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_sparks_decay_rate
                    name: Sparks Fade Rate
                    icon: mdi:blur-linear
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_sparks_decay_rate
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_lows_sensitivity
                    name: Lows
                    icon: mdi:weight-lifter
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_lows_sensitivity
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_mids_sensitivity
                    name: Mids
                    icon: mdi:weight-lifter
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_mids_sensitivity
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_high_sensitivity
                    name: High
                    icon: mdi:weight-lifter
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_high_sensitivity
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_scan_width
                    name: Scan Width
                    icon: mdi:arrow-expand-horizontal
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_scan_width
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_speed
                    name: Speed
                    icon: mdi:speedometer
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_speed
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_threshold
                    name: Threshold
                    icon: null
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_threshold
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_number.festfx_v_rgb_mix
                    name: RGB Mix
                    icon: mdi:format-color-fill
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_rgb_mix
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: slider
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - entity: input_boolean.festfx_v_flip_gradient
                    name: Flip Gradient
                    icon: mdi:flip-horizontal
                    card_mod:
                      entity: input_boolean.festfx_v_flip_gradient
                      style: |
                        .bubble-button-background {
                          {% if is_state('input_boolean.festfx_v_flip_gradient', 'on') %} background: #008800 !important;
                          {% else %} background: rgba(0,255,0,0.2) !important; {% endif %}
                        }
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_flip_gradient
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    type: custom:bubble-card
                    card_type: button
                    show_icon: true
                    show_name: true
                    show_state: false
                    button_type: switch
                    scrolling_effect: false
                    force_icon: false
                    grid_options:
                      columns: 6
                      rows: 1
                  - type: custom:bubble-card
                    card_type: select
                    entity: input_select.festfx_v_color_scan
                    show_icon: true
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_color_scan
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    icon: mdi:palette
                    show_name: true
                    show_state: false
                    name: Scan Color
                    card_mod:
                      class: color-picker
                      entity: input_boolean.festfx_b_color_scan
                      extra_entities:
                        - input_select.festfx_v_color_scan
                      style: >

                        .bubble-select-card-container { {% if
                        is_state('input_select.festfx_v_color_scan', 'Bla')
                        %}background:#000000{% elif
                        is_state('input_select.festfx_v_color_scan', 'Wh')
                        %}background:#ffffff{% elif
                        is_state('input_select.festfx_v_color_scan', 'Bl D')
                        %}background:#0000aa{% elif
                        is_state('input_select.festfx_v_color_scan', 'Bl')
                        %}background:#0000ff{% elif
                        is_state('input_select.festfx_v_color_scan', 'Bl L')
                        %}background:#5555ff{% elif
                        is_state('input_select.festfx_v_color_scan', 'Cy D')
                        %}background:#00aaaa{% elif
                        is_state('input_select.festfx_v_color_scan', 'Cy')
                        %}background:#00ffff{% elif
                        is_state('input_select.festfx_v_color_scan', 'Cy L')
                        %}background:#55ffff{% elif
                        is_state('input_select.festfx_v_color_scan', 'Gr D')
                        %}background:#00aa00{% elif
                        is_state('input_select.festfx_v_color_scan', 'Gr')
                        %}background:#00ff00{% elif
                        is_state('input_select.festfx_v_color_scan', 'Gr L')
                        %}background:#55ff55{% elif
                        is_state('input_select.festfx_v_color_scan', 'Ye D')
                        %}background:#aaaa00{% elif
                        is_state('input_select.festfx_v_color_scan', 'Ye')
                        %}background:#ffff00{% elif
                        is_state('input_select.festfx_v_color_scan', 'Ye L')
                        %}background:#ffff55{% elif
                        is_state('input_select.festfx_v_color_scan', 'Or D')
                        %}background:#aa5500{% elif
                        is_state('input_select.festfx_v_color_scan', 'Or')
                        %}background:#ffaa00{% elif
                        is_state('input_select.festfx_v_color_scan', 'Or L')
                        %}background:#ffbf00{% elif
                        is_state('input_select.festfx_v_color_scan', 'Re D')
                        %}background:#aa0000{% elif
                        is_state('input_select.festfx_v_color_scan', 'Re')
                        %}background:#ff0000{% elif
                        is_state('input_select.festfx_v_color_scan', 'Re L')
                        %}background:#ff5555{% elif
                        is_state('input_select.festfx_v_color_scan', 'Pi D')
                        %}background:#cc0066{% elif
                        is_state('input_select.festfx_v_color_scan', 'Pi')
                        %}background:#ff0080{% elif
                        is_state('input_select.festfx_v_color_scan', 'Pi L')
                        %}background:#ff0080{% elif
                        is_state('input_select.festfx_v_color_scan', 'Pu D')
                        %}background:#800080{% elif
                        is_state('input_select.festfx_v_color_scan', 'Pu')
                        %}background:#ff00ff{% elif
                        is_state('input_select.festfx_v_color_scan', 'Pu L')
                        %}background:#ff55ff{% elif
                        is_state('input_select.festfx_v_color_scan', 'Bl/Pi')
                        %}background:linear-gradient(90deg,#0000aa 0%,#ff0080
                        100%){% elif
                        is_state('input_select.festfx_v_color_scan', 'Or/Bl')
                        %}background:linear-gradient(90deg,#ffaa00 0%,#0000aa
                        100%){% elif
                        is_state('input_select.festfx_v_color_scan', 'Cy/Or')
                        %}background:linear-gradient(90deg,#00ffff 0%,#ffaa00
                        100%){% elif
                        is_state('input_select.festfx_v_color_scan', 'Gr/Cy')
                        %}background:linear-gradient(90deg,#55ff55 0%,#00ffff
                        100%){% elif
                        is_state('input_select.festfx_v_color_scan', 'Ye/Gr')
                        %}background:linear-gradient(90deg,#ffff00 0%,#55ff55
                        100%){% elif
                        is_state('input_select.festfx_v_color_scan', 'Bl/Ye')
                        %}background:linear-gradient(90deg,#0080ff 0%,#ffff00
                        100%){% elif
                        is_state('input_select.festfx_v_color_scan', 'Re/Or/Gr')
                        %}background:linear-gradient(90deg,rgba(255,0,0,1)
                        0%,rgba(255,154,0,1) 50%,rgba(79,220,74,1) 100%){% elif
                        is_state('input_select.festfx_v_color_scan', 'RGB')
                        %}background:linear-gradient(90deg,rgba(255,0,0,1)
                        0%,rgba(255,154,0,1) 10%,rgba(208,222,33,1)
                        20%,rgba(79,220,74,1) 30%,rgba(63,218,216,1)
                        40%,rgba(47,201,226,1) 50%,rgba(28,127,238,1)
                        60%,rgba(95,21,242,1) 70%,rgba(186,12,248,1)
                        80%,rgba(251,7,217,1) 90%,rgba(255,0,0,1) 100%){% endif
                        %}; }
                    scrolling_effect: false
                  - type: custom:bubble-card
                    card_type: select
                    entity: input_select.festfx_v_sparks_color
                    show_icon: true
                    visibility:
                      - condition: or
                        conditions:
                          - condition: state
                            entity: input_boolean.festfx_b_sparks_color
                            state: 'on'
                          - condition: state
                            entity: input_text.festfx_v_effect
                            state: all
                    icon: mdi:palette
                    show_name: true
                    show_state: false
                    name: Sparks Color
                    scrolling_effect: false
                    card_mod:
                      class: color-picker
                      entity: input_boolean.festfx_b_sparks_color
                      extra_entities:
                        - input_select.festfx_v_sparks_color
                      style: >
                        .bubble-dropdown-select {display: flex; flex-wrap:
                        wrap;}
                          mwc-list-item {flex: 1 0 33%;}
                        .bubble-select-card-container { {% if
                        is_state('input_select.festfx_v_sparks_color', 'Bla')
                        %}background:#000000{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Wh')
                        %}background:#ffffff{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Bl D')
                        %}background:#0000aa{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Bl')
                        %}background:#0000ff{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Bl L')
                        %}background:#5555ff{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Cy D')
                        %}background:#00aaaa{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Cy')
                        %}background:#00ffff{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Cy L')
                        %}background:#55ffff{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Gr D')
                        %}background:#00aa00{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Gr')
                        %}background:#00ff00{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Gr L')
                        %}background:#55ff55{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Ye D')
                        %}background:#aaaa00{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Ye')
                        %}background:#ffff00{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Ye L')
                        %}background:#ffff55{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Or D')
                        %}background:#aa5500{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Or')
                        %}background:#ffaa00{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Or L')
                        %}background:#ffbf00{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Re D')
                        %}background:#aa0000{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Re')
                        %}background:#ff0000{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Re L')
                        %}background:#ff5555{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Pi D')
                        %}background:#cc0066{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Pi')
                        %}background:#ff0080{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Pi L')
                        %}background:#ff0080{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Pu D')
                        %}background:#800080{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Pu')
                        %}background:#ff00ff{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Pu L')
                        %}background:#ff55ff{% elif
                        is_state('input_select.festfx_v_sparks_color', 'Bl/Pi')
                        %}background:linear-gradient(90deg,#0000aa 0%,#ff0080
                        100%){% elif
                        is_state('input_select.festfx_v_sparks_color', 'Or/Bl')
                        %}background:linear-gradient(90deg,#ffaa00 0%,#0000aa
                        100%){% elif
                        is_state('input_select.festfx_v_sparks_color', 'Cy/Or')
                        %}background:linear-gradient(90deg,#00ffff 0%,#ffaa00
                        100%){% elif
                        is_state('input_select.festfx_v_sparks_color', 'Gr/Cy')
                        %}background:linear-gradient(90deg,#55ff55 0%,#00ffff
                        100%){% elif
                        is_state('input_select.festfx_v_sparks_color', 'Ye/Gr')
                        %}background:linear-gradient(90deg,#ffff00 0%,#55ff55
                        100%){% elif
                        is_state('input_select.festfx_v_sparks_color', 'Bl/Ye')
                        %}background:linear-gradient(90deg,#0080ff 0%,#ffff00
                        100%){% elif
                        is_state('input_select.festfx_v_sparks_color',
                        'Re/Or/Gr')
                        %}background:linear-gradient(90deg,rgba(255,0,0,1)
                        0%,rgba(255,154,0,1) 50%,rgba(79,220,74,1) 100%){% elif
                        is_state('input_select.festfx_v_sparks_color', 'RGB')
                        %}background:linear-gradient(90deg,rgba(255,0,0,1)
                        0%,rgba(255,154,0,1) 10%,rgba(208,222,33,1)
                        20%,rgba(79,220,74,1) 30%,rgba(63,218,216,1)
                        40%,rgba(47,201,226,1) 50%,rgba(28,127,238,1)
                        60%,rgba(95,21,242,1) 70%,rgba(186,12,248,1)
                        80%,rgba(251,7,217,1) 90%,rgba(255,0,0,1) 100%){% endif
                        %}; }
                columns: 2
          - type: custom:bubble-card
            card_type: pop-up
            hash: '#color'
            name: Test
            show_header: true
            close_on_click: true
            button_type: name
            show_name: true
            show_icon: true
            icon: mdi:account
            grid_options:
              columns: 12
              rows: 2
      - type: grid
        cards: []
    cards: []
card_mod:
  style: |
    .bubble-icon {color: rgb(150, 150, 150) !important;opacity: 1 !important;} 
